{"version":3,"sources":["webpack://@webbinaro/flarum-digest/webpack/bootstrap","webpack://@webbinaro/flarum-digest/./forum.js","webpack://@webbinaro/flarum-digest/./src/forum/index.js","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['Model']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['app']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['components/Button']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['components/Dropdown']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['components/FieldSet']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['components/SettingsPage']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['components/SignUpModal']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['extend']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['models/User']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['utils/ItemList']\"","webpack://@webbinaro/flarum-digest/external \"flarum.core.compat['utils/Stream']\""],"names":["app","initializers","add","User","prototype","digestEnabled","Model","attribute","extend","SignUpModal","getDigest","Stream","items","m","type","bidi","disabled","loading","translator","trans","data","SettingsPage","digestItems","ItemList","options","Dropdown","component","buttonClassName","label","session","user","map","value","i","active","Button","text","title","icon","onclick","save","FieldSet","className","toArray"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\n","import app from 'flarum/app';\nimport {extend} from 'flarum/extend';\nimport Button from 'flarum/components/Button'\nimport Dropdown from 'flarum/components/Dropdown'\nimport SignUpModal from 'flarum/components/SignUpModal';\nimport SettingsPage from 'flarum/components/SettingsPage';\nimport FieldSet from 'flarum/components/FieldSet';\nimport ItemList from 'flarum/utils/ItemList';\nimport Stream from 'flarum/utils/Stream'\n\nimport User from 'flarum/models/User';\nimport Model from 'flarum/Model';\n\napp.initializers.add('kyrne-sylloge', () => {\n  User.prototype.digestEnabled = Model.attribute('digestEnabled');\n\n  extend(SignUpModal.prototype, 'init', function () {\n    this.getDigest = Stream(false);\n  });\n\n  extend(SignUpModal.prototype, 'fields', function (items) {\n    items.add('kyrne-sylloge', m('.Form-group', m('.sylloge-checkbox', m('label.checkbox', [\n      m('input', {\n        type: 'checkbox',\n        bidi: this.getDigest,\n        disabled: this.loading,\n      }),\n      app.translator.trans('kyrne-sylloge.forum.signup.want_digest'),\n    ]))));\n  });\n\n  extend(SignUpModal.prototype, 'submitData', function (data) {\n    data.digestEnabled = this.getDigest();\n  });\n\n  extend(SettingsPage.prototype, 'settingsItems', items => {\n\n    const digestItems = () => {\n        const items = new ItemList();\n\n        const options = [\n          app.translator.trans('kyrne-sylloge.forum.settings.none'),\n          app.translator.trans('kyrne-sylloge.forum.settings.daily'),\n          app.translator.trans('kyrne-sylloge.forum.settings.weekly')\n        ];\n\n        items.add(\n          'Digest',\n          Dropdown.component({\n            buttonClassName: 'Button',\n            label: options[app.session.user.digestEnabled()],\n            \n          },options.map((value, i) => {\n              const active = app.session.user.digestEnabled() === i;\n\n              return Button.component({\n                text: value,\n                title:value,\n                label: value,\n                icon: active ? 'fas fa-check' : true,\n                onclick: () => {\n                  app.session.user.save({\n                    digestEnabled: i\n                  })\n                },\n                active,\n              },value);\n            })),\n          -10\n        );\n\n        return items;\n      };\n\n      items.add(\n        'digest',\n        FieldSet.component({\n          label: app.translator.trans('kyrne-sylloge.forum.settings.label'),\n          className: 'Settings-account',\n        },digestItems().toArray()), 1\n      );\n  });\n});\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['components/FieldSet'];","module.exports = flarum.core.compat['components/SettingsPage'];","module.exports = flarum.core.compat['components/SignUpModal'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];"],"sourceRoot":""}